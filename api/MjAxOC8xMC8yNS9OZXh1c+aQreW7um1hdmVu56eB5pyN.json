{"title":"Nexus搭建maven私服","date":"2018-10-25T13:53:04.000Z","date_formatted":{"ll":"Oct 25, 2018","L":"10/25/2018","MM-DD":"10-25"},"link":"2018/10/25/Nexus搭建maven私服","tags":["maven私服搭建"],"categories":["Maven"],"updated":"2019-06-10T08:47:34.715Z","content":"<h3 id=\"前言\">前言<a href=\"#前言\" title=\"前言\"></a></h3><p>使用nexus2.14版本搭建maven私服，中间踩了一些坑，记录下来，nexus3.x 版本和nexus差别还是不小的，尤其是索引的更新。</p>\n<blockquote>\n<p>2019-04-15更新，看完《maven实战》后修改</p>\n</blockquote>\n<a id=\"more\"></a><h3 id=\"私服的概念和我们为什么要配私服\">私服的概念和我们为什么要配私服<a href=\"#私服的概念和我们为什么要配私服\" title=\"私服的概念和我们为什么要配私服\"></a></h3><h4 id=\"什么是私服\">什么是私服<a href=\"#什么是私服\" title=\"什么是私服\"></a></h4><p>私服可以看作是一个仓库，项目开发时总是要需要构件的，配置在局域网内的私服可以让局域网内所有用户请求构件，而不必频繁的访问中央仓库（众所周知，maven中央仓库的速度），升值有些开发环境时不允许开发人员连接外网的，那么开发人员的唯一远程仓库就是私服，私服从外部下载构件</p>\n<h4 id=\"为什么配私服\">为什么配私服<a href=\"#为什么配私服\" title=\"为什么配私服\"></a></h4><p>出了上述的原因之外，私服更有协议maven中央仓库没有的优势，比如开发人员可以将项目打包部署到私服，供其他人员使用，一些小众的jar包可以手动上传至私服<br>总的来说，一般大一些的项目都会配置</p>\n<h3 id=\"下载安装\">下载安装<a href=\"#下载安装\" title=\"下载安装\"></a></h3><ol><li><p>下载nexus2.14版本，下载链接：<a href=\"https://support.sonatype.com/hc/en-us/articles/218238798-Nexus-Repository-Manager-OSS-Download-Archives\" target=\"_blank\">nexus2.14下载</a></p>\n</li>\n<li><p>下载完成后解压得到两个文件夹，一个安装目录一个work目录，进入安装目录、bin、jsw，选择和自己操作系统匹配的文件夹进入</p>\n<blockquote>\n<p>注意：</p>\n<p>这里尤其注意的是不能解压在包含中文字符的目录下，否则启动会报一个无法打开日志文件的错误!!!</p>\n</blockquote>\n</li>\n</ol><p>我安装在windows上的，进入windows_64x，可以看到有多个命令，介绍如下</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">console-nexus.bat  以命令窗口的形式启动，关闭后服务停止</span><br><span class=\"line\"></span><br><span class=\"line\">install-nexus.bat   设置开机启动，在服务中可以看成到该服务为开机自动启动</span><br><span class=\"line\"></span><br><span class=\"line\">stop-nexus.bat      停止服务</span><br><span class=\"line\"></span><br><span class=\"line\">uninstall-nexus.bat  卸载nexus</span><br></pre></td></tr></table></figure><ol><li>双击启动nexus，打开游览器输入<a href=\"http://192.168.88.16:8081/nexus/\" target=\"_blank\">http://192.168.88.16:8081/nexus/</a>，出现以下页面表示启动成功</li>\n</ol><p><img src=\"https://blog-1258374330.cos.ap-shanghai.myqcloud.com/%E5%8D%9A%E5%AE%A2/nexus%E6%90%AD%E5%BB%BAmaven%E7%A7%81%E6%9C%8D/Snipaste_2019-04-15_14-48-11.png\" class=\"φcy\" alt=\"nexus启动页\"><br>至此nexus安装启动成功</p>\n<h3 id=\"nexus页面介绍\">Nexus页面介绍<a href=\"#nexus页面介绍\" title=\"Nexus页面介绍\"></a></h3><h5 id=\"repositories\">Repositories<a href=\"#repositories\" title=\"Repositories\"></a></h5><p>这个是nexus最核心的功能，在这里可以创建仓库，配置仓库属性<br>![]<a href=\"https://blog-1258374330.cos.ap-shanghai.myqcloud.com/%E5%8D%9A%E5%AE%A2/nexus%E6%90%AD%E5%BB%BAmaven%E7%A7%81%E6%9C%8D/Snipaste_2019-04-15_14-48-11.png\" target=\"_blank\">https://blog-1258374330.cos.ap-shanghai.myqcloud.com/%E5%8D%9A%E5%AE%A2/nexus%E6%90%AD%E5%BB%BAmaven%E7%A7%81%E6%9C%8D/Snipaste_2019-04-15_14-48-11.png</a>)</p>\n<h5 id=\"仓库介绍\">仓库介绍<a href=\"#仓库介绍\" title=\"仓库介绍\"></a></h5><p>可以看到仓库一般分为三种，hosted宿主仓库，proxy代理仓库以及virtural的虚拟仓库，所谓宿主将库，就是用于将构件上传至maven私服的仓库，一般我们配置上releases和snapshots两个，而代理仓库就是用于下载外部构件的远程库，aliyun镜像仓库就是一个代理仓库，virtural的虚拟仓库仅仅是逻辑上的仓库，他可能两个仓库合并</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">介绍一下仓库的属性：</span><br><span class=\"line\">\tType:</span><br><span class=\"line\">\t\tgroup（仓库组）:组合各个仓库一同向外提供服务</span><br><span class=\"line\">\t\thosted（宿主）：用于发布内部项目构件或第三方的项目构件，还有私服的配置</span><br><span class=\"line\">\t\tproxy（代理）：代理远程仓库</span><br><span class=\"line\">\t\tvirtual（虚拟）：</span><br><span class=\"line\">\tID：</span><br><span class=\"line\">\t\t唯一标识</span><br><span class=\"line\">\tName:</span><br><span class=\"line\">\t\t解释说明</span><br><span class=\"line\">\tProvider:</span><br><span class=\"line\">\t\t一般都用Maven2</span><br><span class=\"line\">\tRepository Policy：</span><br><span class=\"line\">\t\tSnapshot:快照</span><br><span class=\"line\">\t\tRelease:稳定</span><br><span class=\"line\">\tDeployment Policy：</span><br><span class=\"line\">\t\t是否允许重新部署，这在部署构件到远程仓库时需要开启</span><br></pre></td></tr></table></figure><h4 id=\"更新索引\">更新索引<a href=\"#更新索引\" title=\"更新索引\"></a></h4><blockquote>\n<p><strong>注意</strong><br>更新索引的意义仅仅在于搜索而已，事实上我们不更新索引也是没关系的，只要下载了相关jar包，点击rebuild index就可以将已下载的jar包索引构建完毕，</p>\n</blockquote>\n<ol><li><p>登录</p>\n<p>管理员账号登录，用户名admin，密码admin123</p>\n</li>\n<li><p>更新索引</p>\n<p>一般我们初次启动nexus时，center仓库是空的，而索引可以看作是压缩版的jar包集合，让我们可以从本地的远程库中拉取依赖，可以在configuration中配置索引的自动更新，但是这样下载速度奇慢无比，而且容易卡死，这在scheduled task可以看到update index一直处于running状态，这里比较推荐手动更新，网上的步骤说的都很详细</p>\n<ol><li><p>下载相关文件</p>\n<p>三个文件，分别是nexus-maven-repository-index.gz，nexus-maven-repository-index.properties以及ndexer-cli-5.1.1.jar，这在我的百度网盘中都保存了，下载链接：</p>\n</li>\n<li><p>解压索引文件</p>\n<p>三个文件放到同一目录下，执行：<code>java -jar indexer-cli-5.1.1.jar -u nexus-maven-repository-index.gz -d indexer</code></p>\n</li>\n<li><p>解压完毕后把indexer文件夹<strong>里面的文件</strong>拷贝到{nexus-home}/sonatype-work/nexus/indexer/central-ctx目录下，重新启动nexus</p>\n</li>\n<li><p>当我们更新索引成功后，可以在Browse Index后选项卡看到许多文件<br><img src=\"https://blog-1258374330.cos.ap-shanghai.myqcloud.com/%E5%8D%9A%E5%AE%A2/nexus%E6%90%AD%E5%BB%BAmaven%E7%A7%81%E6%9C%8D/Snipaste_2019-04-15_14-49-18.png\" class=\"φcy\"></p>\n</li>\n</ol></li>\n</ol><h4 id=\"搭建私服仓库\">搭建私服仓库<a href=\"#搭建私服仓库\" title=\"搭建私服仓库\"></a></h4><p>我们先建立一个aliyun的代理仓库，id为aliyun，仓库地址为 <a href=\"http://maven.aliyun.com/nexus/content/groups/public\" target=\"_blank\">阿里云仓库</a>；在配置两个hosted宿主仓库用以发布构件到maven私服，版本分别为snapshots和releases，deployment属性为allow允许部署；再新建一个仓库组将这些都加入，包括中央仓库，调整它的顺序，它的顺序就是maven依赖选择下载的顺序，一般我们将阿里云的代理仓库置于中央仓库之上</p>\n<blockquote>\n<p>注意：<br>上传那么就要把Deployment Policy改为允许上传</p>\n</blockquote>\n<h4 id=\"私服仓库配置\">私服仓库配置<a href=\"#私服仓库配置\" title=\"私服仓库配置\"></a></h4><h5 id=\"添加仓库为私服仓库\">添加仓库为私服仓库<a href=\"#添加仓库为私服仓库\" title=\"添加仓库为私服仓库\"></a></h5><p>这里既可以配置在settings.xml中，也可以配置pom.xml中<br>一般建议写在setting.xml之中</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 定义一些属性配置 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus-profile<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repositorys</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/nexus/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repositorys</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">pluginRepositories</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/nexus/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">              <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">pluginRepositories</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">profile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">profiles</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 激活 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">activeProfiles</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">activeProfile</span>&gt;</span>nexus-profile<span class=\"tag\">&lt;/<span class=\"name\">activeProfile</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">activeProfiles</span>&gt;</span></span><br></pre></td></tr></table></figure><p>写在pom.xml之中</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>film-group<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/film-group/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">repositories</span>&gt;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">pluginRepositories</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>film-group<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/film-group/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">releases</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">enabled</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">enabled</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">snapshots</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">pluginRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">pluginRepositories</span>&gt;</span></span><br></pre></td></tr></table></figure><p>仓库标签下有些属性还是要介绍下的</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">id：仓库声明的唯一id，尤其需要注意的是，Maven自带的中央仓库使用的id为central，</span><br><span class=\"line\">\t如果其他仓库声明也使用该id，就会覆盖中央仓库的配置</span><br><span class=\"line\">name：仓库的名称，让我们直观方便的知道仓库是哪个</span><br><span class=\"line\">url：指向了仓库的地址，一般来说，该地址都基于http协议，</span><br><span class=\"line\">\tMaven用户都可以在浏览器中打开仓库地址浏览构件。</span><br><span class=\"line\">releases和snapshots：用来控制Maven对于发布版构件和快照版构件的下载权限。</span><br><span class=\"line\">\t需要注意的是enabled子元素，该例中releases的enabled值为true，</span><br><span class=\"line\">\t表示开启JBoss仓库的发布版本下载支持，而snapshots的enabled值为false，</span><br><span class=\"line\">\t表示关闭JBoss仓库的快照版本的下载支持。根据该配置，</span><br><span class=\"line\">\tMaven只会从JBoss仓库下载发布版的构件，而不会下载快照版的构件。</span><br><span class=\"line\">layout：元素值default表示仓库的布局是Maven2及Maven3的默认布局，</span><br><span class=\"line\">\t而不是Maven1的布局。基本不会用到Maven1的布局</span><br></pre></td></tr></table></figure><p>至此，大部分请求会请求苏福，但是想要屏蔽所有请求到私服的话，还需要配置镜像</p>\n<h5 id=\"先配置镜像用以屏蔽所有仓库的请求，转至私服\">先配置镜像用以屏蔽所有仓库的请求，转至私服<a href=\"#先配置镜像用以屏蔽所有仓库的请求，转至私服\" title=\"先配置镜像用以屏蔽所有仓库的请求，转至私服\"></a></h5><p>在settings.xml中，配置如下：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">mirrors</span>&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">mirror</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>nexus<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span>  </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>nexus<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span>  </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/nexus/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span>;  </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">mirrorOf</span>&gt;</span>*<span class=\"tag\">&lt;/<span class=\"name\">mirrorOf</span>&gt;</span> </span><br><span class=\"line\">     <span class=\"tag\">&lt;/<span class=\"name\">mirror</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>mirrorOf配置规则</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;mirrorOf&gt;*&lt;mirrorOf&gt;:匹配所有远程仓库。</span><br><span class=\"line\">&lt;mirrorOf&gt;external:*&lt;mirrorOf&gt;:匹配所有远程仓库，使用localhost的除外，使用file:&#x2F;&#x2F;协议的除外。也就是说，匹配所有不在本机上的远程仓库。</span><br><span class=\"line\">&lt;mirrorOf&gt;repo1,repo2&lt;mirrorOf&gt;:匹配仓库repo1h和repo2，使用逗号分隔多个远程仓库。</span><br><span class=\"line\">&lt;mirrorOf&gt;*,!repo1&lt;mirrorOf&gt;:匹配所有远程仓库，repo1除外，使用感叹号将仓库从匹配中排除。</span><br></pre></td></tr></table></figure><h5 id=\"配置仓库为私服仓库\">配置仓库为私服仓库<a href=\"#配置仓库为私服仓库\" title=\"配置仓库为私服仓库\"></a></h5><p>这里已经可以完成构件使用的功能了，想要上传构建需要继续配置</p>\n<h4 id=\"部署构件到私服\">部署构件到私服<a href=\"#部署构件到私服\" title=\"部署构件到私服\"></a></h4><p>就是把本项目上传到maven</p>\n<ol><li>pom.xml中配置构件上传的地址<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">distributionManagement</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>film-releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>nexus_repository<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/film-releases/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">repository</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>film-snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>nexus_repository<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">url</span>&gt;</span>http://localhost:8081/repository/film-snapshots/<span class=\"tag\">&lt;/<span class=\"name\">url</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">snapshotRepository</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n<li>在settings.xml中配置认证信息<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">servers</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>film-releases<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin123<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>film-snapshots<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">username</span>&gt;</span>admin<span class=\"tag\">&lt;/<span class=\"name\">username</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">password</span>&gt;</span>admin123<span class=\"tag\">&lt;/<span class=\"name\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">server</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">servers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>\n</ol><h4 id=\"更多\">更多<a href=\"#更多\" title=\"更多\"></a></h4><p>搭建私服的过程和使用的基本配置介绍完毕<br>更多的权限的细节控制，定时任务的执行，还有maven的一些基础只是就不必介绍了</p>\n<h4 id=\"相关\">相关<a href=\"#相关\" title=\"相关\"></a></h4><ol><li>《maven实战》</li>\n<li><a href=\"https://my.oschina.net/thinwonton/blog/879685\" target=\"_blank\">持续集成-Sonatype Nexus安装</a></li>\n<li><a href=\"http://tengj.top/2018/01/01/maven/\" target=\"_blank\">Maven入门，读完这篇就够了</a></li>\n</ol>","prev":{"title":"记七牛云回收测试域名导致博客图片丢失","link":"2018/11/26/记七牛云回收测试域名导致博客图片丢失"},"next":{"title":"存储引擎:InnoDB和MyISAM","link":"2018/09/05/存储引擎：InnoDB和MyISAM"},"plink":"http://yoursite.com/2018/10/25/Nexus搭建maven私服/","toc":[{"id":"前言","title":"前言","index":"1"},{"id":"私服的概念和我们为什么要配私服","title":"私服的概念和我们为什么要配私服","index":"2"},{"id":"下载安装","title":"下载安装","index":"3"},{"id":"nexus页面介绍","title":"Nexus页面介绍","index":"4"}]}